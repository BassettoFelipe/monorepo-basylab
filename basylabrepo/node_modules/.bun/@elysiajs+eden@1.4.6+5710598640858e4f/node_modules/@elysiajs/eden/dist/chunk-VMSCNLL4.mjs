import{a as l,c as p}from"./chunk-QSLHAOSM.mjs";var j=async t=>{switch(t.headers.get("Content-Type")?.split(";")[0]){case"application/json":return t.json();case"application/octet-stream":return t.arrayBuffer();case"multipart/form-data":{let e=await t.formData(),s={};return e.forEach((c,a)=>{s[a]=c}),s}}return t.text().then(p)},w=async(t,r)=>{let e=await j(t);return t.status>300?{data:null,status:t.status,headers:t.headers,retry:r,error:new l(t.status,e)}:{data:e,error:null,status:t.status,headers:t.headers,retry:r}},S=(t,r)=>(e,{query:s,params:c,body:a,...i}={})=>{c&&Object.entries(c).forEach(([n,o])=>{e=e.replace(`:${n}`,o)});let d=r?.fetcher||globalThis.fetch,y=s?Object.fromEntries(Object.entries(s).filter(([n,o])=>o!=null)):null,m=y?`?${new URLSearchParams(y).toString()}`:"",E=`${t}${e}${m}`,h=new Headers(i.headers||{}),f=h.get("content-type");if(!(a instanceof FormData)&&!(a instanceof URLSearchParams)&&(!f||f==="application/json"))try{a=JSON.stringify(a),f||h.set("content-type","application/json")}catch{}let g={...i,method:i.method?.toUpperCase()||"GET",headers:h,body:a},u=()=>d(E,g).then(n=>w(n,u)).catch(n=>({data:null,error:new l(503,n),status:503,headers:void 0,retry:u}));return u()};export{S as a};
